import path from 'path';
import Promise from 'bluebird';
import {
  // TeamDepartment,
  // TeamMember,
  // TeamDepartmentTranslation,
  // TeamMemberTranslation,
  Language,
  Post,
  Term,
  TermTaxonomy,
  User,
  MediaLibrary
} from '../models';
import slugify from '../../core/generateSlug';
import Sequelize from '../sequelize';

const filename = path.basename(__filename);
const DESCRIPTION = `Auto generated by seed name: ${filename}`;
const DEPTS = ['Management', 'IT', 'Marketing', 'Sales', 'Development', 'Technology & Marketing', 'Support'];

export default {
  up: async () => {

    // author ====
    const author = await User.findOne();
    // languages ====
    const en = await Language.findOne({ where: { locale: 'en' } });
    const fr = await Language.findOne({ where: { locale: 'fr' } });
    // content ====
    const contentEN = JSON.parse ("{\"entityMap\":{},\"blocks\":[{\"key\":\"8donc\",\"text\":\"HELLO it is me\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"offset\":0,\"length\":14,\"style\":\"BOLD\"},{\"offset\":0,\"length\":14,\"style\":\"ITALIC\"}],\"entityRanges\":[],\"data\":{}},{\"key\":\"3qoma\",\"text\":\"How are you?\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"offset\":0,\"length\":12,\"style\":\"BOLD\"},{\"offset\":0,\"length\":12,\"style\":\"ITALIC\"}],\"entityRanges\":[],\"data\":{}},{\"key\":\"agvao\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}]}");
    const contentFR = JSON.parse ("{\"entityMap\":{},\"blocks\":[{\"key\":\"8donc\",\"text\":\"BONJOUR monsieur\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"offset\":0,\"length\":14,\"style\":\"BOLD\"},{\"offset\":0,\"length\":14,\"style\":\"ITALIC\"}],\"entityRanges\":[],\"data\":{}},{\"key\":\"3qoma\",\"text\":\"Comment ca va?\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"offset\":0,\"length\":12,\"style\":\"BOLD\"},{\"offset\":0,\"length\":12,\"style\":\"ITALIC\"}],\"entityRanges\":[],\"data\":{}},{\"key\":\"agvao\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}]}");
    // image ====
    const image = await MediaLibrary.findOne({ order: Sequelize.fn('RANDOM') });

    const interestingEN = await Post.create({
      title: 'Finance',
      post_id: 'fina',
      body: contentEN,
      meta: {
        template: 'service-details',
        also_intersting: [],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: en.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

    const interestingFR = await Post.create({
      title: 'Finance',
      post_id: 'fina',
      body: contentFR,
      meta: {
        template: 'service-details',
        also_intersting: [],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: fr.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

    // ENGLISH
    await Post.create({
      title: 'Services',
      post_id: 'serv1',
      meta: {
        template: 'services',
      },
      type: 'page',
      state: 'published',
      user_id: author.id,
      language_id: en.id,
      summary: DESCRIPTION,
    });

    await Post.create({
      title: 'Business Trips',
      post_id: 'bizT',
      body: contentEN,
      meta: {
        template: 'service-details',
        also_intersting: [
          { post_uuid: interestingEN.id }
        ],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: en.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

    await Post.create({
      title: 'Weekend Escapes',
      post_id: 'weeknd',
      body: contentEN,
      meta: {
        template: 'service-details',
        also_intersting: [
          { post_uuid: interestingEN.id }
        ],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: en.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

    // FRENCH
    await Post.create({
      title: 'Services',
      post_id: 'serv1',
      meta: {
        template: 'services',
      },
      type: 'page',
      state: 'published',
      user_id: author.id,
      language_id: fr.id,
      summary: DESCRIPTION,
    });

    await Post.create({
      title: 'Business Trips',
      post_id: 'bizT',
      body: contentFR,
      meta: {
        template: 'service-details',
        also_intersting: [
          { post_uuid: interestingFR.id }
        ],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: fr.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

    await Post.create({
      title: 'Weekend Escapes',
      post_id: 'weeknd',
      body: contentFR,
      meta: {
        template: 'service-details',
        also_intersting: [
          { post_uuid: interestingFR.id }
        ],
      },
      type: 'service',
      state: 'published',
      user_id: author.id,
      language_id: fr.id,
      summary: DESCRIPTION,
      media_id: image.id,
    });

  },
  down: async () => {
    await Post.destroy({ where: { post_id: { $in: ['weeknd', 'bizT', 'serv1', 'fina'] } }, force: true, cascade: true });
  },
};
