import path from 'path';
import Promise from 'bluebird';
import {
  // TeamDepartment,
  // TeamMember,
  // TeamDepartmentTranslation,
  // TeamMemberTranslation,
  Language,
  Post,
  Term,
  TermTaxonomy,
  User,
  MediaLibrary
} from '../models';
import slugify from '../../core/generateSlug';
import Sequelize from '../sequelize';

const filename = path.basename(__filename);
const DESCRIPTION = `Auto generated by seed name: ${filename}`;

export default {
  up: async () => {

    // author ====
    const author = await User.findOne();
    // languages ====
    const en = await Language.findOne({ where: { locale: 'en' } });
    const fr = await Language.findOne({ where: { locale: 'fr' } });

    // image ====
    const image = await MediaLibrary.findOne({ order: Sequelize.fn('RANDOM') });

    const history = [
      {
        year: 2018,
        descriptions: {
          description: "test 2018",
          month: "No Month",
          percs: [
            {
              'text': "test no month",
              'image': "/assets/src/admin/routes/website/posts/Sidebars/Custom/History/gfx/businessman.svg?267d811b",
              'icon-class': "fa-building-o"
            },
            {
              'text': "test no month",
              'image': "/assets/src/admin/routes/website/posts/Sidebars/Custom/History/gfx/businessman.svg?267d811b",
              'icon-class': "fa-building-o"
            }
          ]
        }
      },
      {
        year: 2017,
        descriptions: {
          description: "test 2017",
          month: "No Month",
          percs: [
            {
              'text': "test no month",
              'image': "/assets/src/admin/routes/website/posts/Sidebars/Custom/History/gfx/businessman.svg?267d811b",
              'icon-class': "fa-building-o"
            },
            {
              'text': "test no month",
              'image': "/assets/src/admin/routes/website/posts/Sidebars/Custom/History/gfx/businessman.svg?267d811b",
              'icon-class': "fa-building-o"
            }
          ]
        }
      }
    ];    

    // ENGLISH
    await Post.create({
      title: 'History',
      post_id: 'histor',
      meta: {
        template: 'history',
        history,
      },
      type: 'page',
      state: 'published',
      user_id: author.id,
      language_id: en.id,
      summary: DESCRIPTION,
    });

    await Post.create({
      title: 'History FR',
      post_id: 'histor',
      meta: {
        template: 'history',
        history
      },
      type: 'page',
      state: 'published',
      user_id: author.id,
      language_id: fr.id,
      summary: DESCRIPTION,
    });

  },
  down: async () => {
    await Post.destroy({ where: { post_id: { $in: ['histor'] } }, force: true, cascade: true });
  },
};
