import Promise from 'bluebird';
import path from 'path';
import { StringTranslation, Language } from '../models';

const filename = path.basename(__filename);
const DESCRIPTION = `Auto generated by seed name: ${filename}`;

export default {
  up: async (queryInterface) => {

    const langList = await Language.findAll({ where: { enabled: true } });

    const url_login = {
      message_id: 'url.login',
      defaultMessage: 'login',
      translation: 'login'
    };
    const url_create_account = {
      message_id: 'url.create_account',
      defaultMessage: 'create_account',
      translation: 'create_account'
    };
    const url_forgot_password = {
      message_id: 'url.forgot_password',
      defaultMessage: 'forgot_password',
      translation: 'forgot_password'
    };

    await Promise.each(langList, async (lang) => {
      await StringTranslation.create({
        ...url_login,
        language_id: lang.id
      })
      await StringTranslation.create({
        ...url_create_account,
        language_id: lang.id,
      })
      await StringTranslation.create({
        ...url_forgot_password,
        language_id: lang.id,
      })
    });
  },

  down: async () => {
    await StringTranslation.destroy({
      where: {
        message_id: [
          'url.login',
          'url.create_account',
          'url.forgot_password',
        ]
      }
    });
  },
};